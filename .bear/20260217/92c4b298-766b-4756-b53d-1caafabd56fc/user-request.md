# 프로그램 소개

우리가 만들고자 하는 프로그램은 **“Bear AI Developer”**라는 이름의 TUI 기반 애플리케이션이야. 이 프로그램은 Claude Code CLI 위에서 명세 기반 소프트웨어 개발을 지원하는 도구로, Go 언어로 작성될 예정이야.

# 구현 방식

앞으로 개발은 탑다운 방식을 사용할거야. 우선 프로그램의 핵심 실행 플로우를 따라가면서 요구사항들을 나열하고, 요구사항들을 구현하기 위해서 필요한 모듈들을 만드는데 각 모듈의 세부 기능은 일단 인터페이스만 정의해놓고 실제 동작은 나중에 구현할거야. 초기 단계에서 각 모듈이 구현해야 하는 모든 기능들을 다 정의하지는 않고 일단 핵심 플로우를 따라가면서 필요한 기능들부터 먼저 정의하고 나머지는 추가 구현 단계에서 정의할거야. 이렇게 하면 초기 단계에서 너무 많은 세부사항들을 고민하지 않고도 전체적인 구조와 흐름을 잡아갈 수 있을거야.

# 핵심 실행 플로우

1. (구현 완료) 사용자가 프로그램을 실행하면 먼저 배너가 출력된다. 
2. (구현 완료) 현재 워킹 디렉토리를 보여주면서 사용자로부터 워크스페이스 경로를 입력받는다.
3. (미구현) 사용자 요구사항을 입력 받는다.
4. (미구현) 스펙 에이전트가 요구사항을 분석해서 명확화 질문이 있으면 사용자에게 질문한다.
5. (미구현) 명확화 질문에 대한 사용자 답변을 받는다. 필요하다면 4번으로 돌아가서 추가 명확화 질문을 반복한다.
6. (미구현) 명확화가 완료되면 스펙 에이전트가 드래프트 스펙을 생성해서 사용자에게 보여준다.
7. (미구현) 사용자가 드래프트 스펙을 검토하고 피드백을 입력한다.
8. (미구현) 스펙 에이전트가 사용자 피드백을 반영해서 드래프트 스펙을 수정한다. 필요하다면 7번으로 돌아가서 추가 피드백을 반복한다.
9. (미구현) 최종 스펙이 확정되면 플랜 에이전트가 사용자 요규사항과 최종 스펙을 분석해서 명확화 질문이 있으면 사용자에게 질문한다.
10. (미구현) 명확화 질문에 대한 사용자 답변을 받는다. 필요하다면 9번으로 돌아가서 추가 명확화 질문을 반복한다.
11. (미구현) 명확화가 완료되면 플랜 에이전트가 드래프트 플랜을 생성해서 사용자에게 보여준다.
12. (미구현) 사용자가 드래프트 플랜을 검토하고 피드백을 입력한다.
13. (미구현) 플랜 에이전트가 사용자 피드백을 반영해서 드래프트 플랜을 수정한다. 필요하다면 12번으로 돌아가서 추가 피드백을 반복한다.
14. (미구현) 최종 플랜이 확정되면 코딩 에이전트가 플랜을 분석해서 개별 태스크들의 상호의존성을 고려한 최적의 실행 순서를 계획한다.
15. (미구현) 코딩 에이전트가 메인 브랜치로부터 통합 브랜치를 생성하고, 각각의 태스크별로 통합 브랜치를 베이스로 워크트리를 만들어서 코드를 구현한다.
16. (미구현) 리뷰어 에이전트가 스펙, 플랜, 구현된 코드를 검토하고 피드백을 제공한다.
17. (미구현) 코딩 에이전트가 리뷰어 피드백을 반영해서 코드를 수정한다. 16번으로 돌아가서 리뷰 승인될 때까지 반복한다.
18. (미구현) 구현 완료된 태스크의 워크트리는 통합 브랜치로 병합되고 모든 태스크가 완료되기를 대기한다.
19. (미구현) 모든 태스크가 완료되면 사용자가 최종 결과물을 검토하고 승인한다. 
20. (미구현) 만약 수정 사항이 있으면 통합 브랜치에서 새로운 워크트리를 만들고 코딩 에이전트가 사용자 피드백을 반영해서 코드를 수정한다. 19번으로 돌아가서 사용자 승인을 받을 때까지 반복한다. 
21. (미구현) 최종 결과물이 승인되면 (아직 통합 브랜치에 병합되지 않은 워크트리가 있다면 병합하고) 통합 브랜치를 메인 브랜치로 병합하고 종료한다.

# 작업 지시

- 이번 작업에서는 위 실행 플로우의 3번 "사용자 요구사항 입력" 단계만 구현한다.
- 워크스페이스 설정이 끝나면 사용자에게 요구사항을 입력받는 프롬프트가 표시되어야 한다.
- 입력 프롬프트는 현재 구현된 것을 그대로 사용한다.
- 입력 텍스트의 길이에는 제한이 없어야 한다. (터미널 또는 OS의 제한 내에서)
- 입력된 텍스트는 화면에 사용자가 입력한 그대로 출력되어야 한다.
- 입력된 텍스트가 터미널 가로 폭보다 길 경우, 오른쪽이 잘리지 않고 자동으로 wrap되어 다음 줄에 이어서 표시되어야 한다.
- 사용자가 직업 타이핑 해서 입력하지 않고 붙여넣기한 텍스트도 동일하게 처리되어야 한다.
- Shift+Enter (또는 Alt+Enter)로 줄바꿈이 가능해야 한다.
- 방향키로 커서 이동이 가능해야 한다.
- 입력 프롬프트에서 사용자가 입력을 완료하고 Enter를 누르면 다음 단계로 진행되어야 한다. (이번 작업에서는 다음 단계 구현은 하지 않지만, Enter 입력이 정상적으로 처리되어야 한다)
- Ctrl+G를 입력하면 외부 에디터를 열어서 입력할 수 있도록 한다. 
  - 외부 에디터에서 입력한 내용을 저장하고 에디터를 닫으면 입력된 내용이 프롬프트로 돌아와서 화면에 출력되어야 한다.
  - 외부 에디터는 `EDITOR` 환경변수로 지정된 편집기를 사용한다. 
  - `EDITOR` 환경변수가 설정되어 있지 않은 경우에는:
    1) VSCode를 `code --wait` 옵션과 함께 사용한다.
    2) 만약 시스템에 `code` 명령이 없는 경우에는 `vi`를 사용한다.
    3) 만약 시스템에 `vi` 명령도 없는 경우에는 에러 메시지를 출력하고 프롬프트로 돌아와서 입력을 계속할 수 있도록 한다. (에러 메시지는 영어로 작성한다)